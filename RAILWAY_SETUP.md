# ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Railway –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ Railway –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è webhook.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç `heal_bot`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Settings**
4. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Domains**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ domain (–Ω–∞–ø—Ä–∏–º–µ—Ä: `heal-bot-production.up.railway.app`)

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å Environment Variable

–í Railway:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Variables**
2. –ù–∞–∂–º–∏—Ç–µ **+ New Variable**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```
WEBHOOK_DOMAIN=https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app
```

**–í–∞–∂–Ω–æ**: 
- –î–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `https://`
- –ë–µ–∑ —Å–ª—ç—à–∞ –≤ –∫–æ–Ω—Ü–µ
- –ü—Ä–∏–º–µ—Ä: `https://heal-bot-production.up.railway.app`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- ‚úÖ `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- ‚úÖ `GEMINI_API_KEY` - –∫–ª—é—á –æ—Ç Google AI Studio  
- ‚úÖ `WEBHOOK_DOMAIN` - –≤–∞—à –¥–æ–º–µ–Ω Railway (–ù–û–í–û–ï!)
- ‚úÖ `NODE_ENV` - –º–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å `production`

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

–ò–ª–∏ –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Deployments**
2. –ù–∞–∂–º–∏—Ç–µ —Ç—Ä–∏ —Ç–æ—á–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–µ–ø–ª–æ–µ
3. –í—ã–±–µ—Ä–∏—Ç–µ **Restart**

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Logs**, –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gemini...
–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ Gemini API...
‚úÖ Gemini API –æ—Ç–≤–µ—á–∞–µ—Ç
‚úÖ Gemini API –ø–æ–¥–∫–ª—é—á–µ–Ω
üåê –ó–∞–ø—É—Å–∫ –≤ webhook —Ä–µ–∂–∏–º–µ
üì° Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/webhook/...
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ!
üì± –ë–æ—Ç: @–≤–∞—à_–±–æ—Ç
üåç –†–µ–∂–∏–º: webhook
üîå –ü–æ—Ä—Ç: XXXX
```

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ë–æ—Ç –≤—Å—ë –µ—â—ë –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. **WEBHOOK_DOMAIN** –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω (—Å `https://`)
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
3. –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ "üì° Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
4. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –û—à–∏–±–∫–∞ "Failed to set webhook"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω (–æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç SSL

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è **–ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ** `WEBHOOK_DOMAIN` –≤ `.env`:

```env
BOT_TOKEN=...
GEMINI_API_KEY=...
NODE_ENV=development
# WEBHOOK_DOMAIN –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –∏–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –≤ polling —Ä–µ–∂–∏–º.

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

- ‚úÖ –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º –ø–æ –Ω–∞–ª–∏—á–∏—é `WEBHOOK_DOMAIN`
- ‚úÖ –ù–∞ Railway: webhook —Ä–µ–∂–∏–º
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ: polling —Ä–µ–∂–∏–º (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

---

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å!** üöÄ
